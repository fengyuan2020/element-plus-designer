import{h as d,E as q,r as b,F as x,o as D,a as w,b as M,w as F,c as h,d as V,e as L,f as W,g as k,t as E,u as m,i as B,j as N,k as S}from"./index-bb523c08.js";const T={props:["currentItem","formModel","formRules","dynamicData"],setup(r){function n(e){return e.__vModel__?{modelValue:r.formModel[e.__vModel__],"onUpdate:modelValue"(t){r.formModel[e.__vModel__]=t}}:{}}function s(e,t){const o=()=>{const{required:p,showLabel:R}=e.__config__;let{label:v,labelWidth:g}=e.__config__;return g=g?g+"px":null,R===!1&&(g="0",v=""),{labelWidth:g,label:v,required:p,prop:e.__vModel__}};let l;t==="rawItem"?l=u(e,!0):t==="fixedItem"?l=y(e,!0):l="error layout!";const c=d(q,{...o()},d(l,null));return d(c,null)}function a(e){let t,o;e.__config__.tag==="el-form"&&(t=r.formModel,o=r.formRules);const{tag:l}=e.__config__;return d(b(l),{...e.__props__,...n(e),model:t,rules:o},i(e))}function i(e,t){let o={};for(const l in e.__slots__)if(!(t&&l==="default")){if(typeof e.__slots__[l]=="string"){o[l]=()=>e.__slots__[l];continue}e.__slots__[l].length!==0&&(o[l]=()=>e.__slots__[l].map(c=>_(c)))}return o}function f(e){const t=e.__data__;let o={};if(t){const{name:l,source:c}=t;if(c==="static")o[l]=t.static[l];else{const p=e.__refs__[l];t.dynamic.dataKey?o[l]=r.dynamicData[p]&&r.dynamicData[p][t.dynamic.dataKey]||[]:o[l]=r.dynamicData[p]||[]}}return{__data__:o}}function y(e,t){let o={...e,...f(e)};return t?d(x,{conf:o,...n(e)}):d(x,{conf:o,...n(e)})}function u(e,t){const{tag:o}=e.__config__,l=f(e).__data__;return t?d(b(o),{...e.__props__,...l,...n(e)},i(e)):d(b(o),{...e.__props__,...l,...n(e)},i(e))}function _(e){if(typeof e=="string")return d("span",e);const{layout:t,wrapWithFormItem:o}=e.__config__;if(o)return s(e,t);if(t==="containerItem")return a(e);if(t==="rawItem")return u(e);if(t==="fixedItem")return y(e)}return()=>_(r.currentItem)}},$={__name:"Render",props:{drawItemList:{type:Array,required:!0},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(r,{emit:n}){const s=r;D(()=>{f(s.drawItemList),console.info(a),n("update:modelValue",a)});const a=w({}),i=w({});function f(u){for(const _ of u)if(typeof _!="string"){if(_.__config__.wrapWithFormItem&&_.__vModel__){const{__config__:e}=_;a.value[_.__vModel__]=s.modelValue&&s.modelValue[_.__vModel__]||e.defaultValue;const t=y(_);t.length>0&&(i.value[_.__vModel__]=t)}Array.isArray(_.__slots__&&_.__slots__.default)&&f(_.__slots__.default)}}function y(u){const _=[],{__config__:e,__props__:t}=u;if(M[e.tag]){if(e.required){const o=Array.isArray(e.defaultValue)?"array":e.defaultValueType;let l=Array.isArray(e.defaultValue)?`请至少选择一个${e.label}`:t&&t.placeholder||"";l===void 0&&(l=`${e.label}不能为空`),_.push({required:!0,type:o,message:l,trigger:M[e.tag]})}e.regList&&Array.isArray(e.regList)&&e.regList.forEach(o=>{o.pattern&&_.push({pattern:new RegExp(o.pattern),message:o.message,trigger:M[e.tag]})})}return _}return F(a,u=>{n("update:modelValue",u)},{deep:!0}),(u,_)=>(h(),V(L,null,[(h(!0),V(L,null,W(r.drawItemList,e=>(h(),B(m(T),{"current-item":e,"form-model":m(a),"form-rules":m(i)},null,8,["current-item","form-model","form-rules"]))),256)),k(" "+E(m(a)),1)],64))}},A=[{__props__:{model:"form101Model",rules:"form101Rules"},__config__:{tag:"el-form",layout:"containerItem"},__slots__:{default:[{__config__:{showLabel:!0,wrapWithFormItem:!0,labelWidth:null,required:!0,regList:[],tag:"el-input-number",layout:"rawItem",label:"计数器",defaultValue:5},__props__:{min:0,max:100,placeholder:"请输入计数器"},__vModel__:"inputNumber102"},{__config__:{defaultValue:4,showLabel:!0,wrapWithFormItem:!0,labelWidth:null,required:!0,tag:"el-rate",layout:"rawItem",label:"评分"},__vModel__:"rate103",__props__:{"allow-half":!0,"show-text":!0}}]}}],j={style:{padding:"20px"}},P={__name:"index",setup(r){const n=w(A),s=w(A);return F(s,a=>{console.info(a)},{deep:!0}),(a,i)=>(h(),V("div",j,[N($,{"draw-item-list":m(n),modelValue:m(s),"onUpdate:modelValue":i[0]||(i[0]=f=>S(s)?s.value=f:null)},null,8,["draw-item-list","modelValue"])]))}};export{P as default};
